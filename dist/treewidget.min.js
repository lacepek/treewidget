var TreeWidget=function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r=function(){function t(){}return t.prototype.config=function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])},t.prototype.setDefaultProps=function(){},t}(),o=function(){function t(){}return t.createElement=function(t,e,n){var r=document.createElement(t);if(n)for(var o in n){var i=n[o];this.setAttribute(r,o,i)}return this.addContent(r,e),r},t.setAttribute=function(t,e,n){if(t&&null!=n&&void 0!=n){e=this.sanitizeAttributeName(e);var r=null;(r=t instanceof s?t.element:t)&&r.setAttribute(e,n)}},t.addContent=function(t,e){if(e&&t)if(e instanceof Array)for(var n=0,r=e;n<r.length;n++){var o=r[n];this.addToElement(t,o)}else this.addToElement(t,e)},t.setContent=function(t,e){e&&t&&(this.clearContent(t),this.addContent(t,e))},t.clearContent=function(t){for(var e=this.getRealElement(t);e.firstChild;)e.removeChild(e.firstChild)},t.addToElement=function(t,e){var n=this.getRealElement(t),r=this.getRealContent(e);n&&r&&("string"==typeof r?n.innerHTML+=r:n.appendChild(r))},t.getRealElement=function(t){return t instanceof HTMLElement?t:t.element},t.getRealContent=function(t){return t instanceof s?t.element:t},t.sanitizeAttributeName=function(t){switch(t){case"className":return"class";case"forId":return"for";case"ariaLabel":return"aria-label";case"ariaHidden":return"aria-hidden"}return t},t}(),i=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=function(t){function e(e){void 0===e&&(e=null);var n=t.call(this)||this;return n._config={},n.setDefaultProps(),n._config=e,n.init(),n.innerRender(),n}return i(e,t),e.prototype.setAttribute=function(t,e){this.element&&o.setAttribute(this.element,t,e)},e.prototype.setContent=function(t){this.element&&o.setContent(this.element,t)},e.prototype.addContent=function(t){this.element&&o.addContent(this.element,t)},e.prototype.clearContent=function(){this.element&&o.clearContent(this.element)},e.prototype.show=function(){this.element.style.visibility="visible"},e.prototype.hide=function(){this.element.style.visibility="hidden"},e.prototype.init=function(){this.config(this._config)},e.prototype.render=function(){this.element||(this.element=o.createElement(this.tag,null,this.attributes)),this.parentElement=this.getParentElement(),this.parentElement&&this.parentElement.appendChild(this.element)},e.prototype.postRender=function(){},e.prototype.getParentElement=function(){return this.parentSelector?document.querySelector(this.parentSelector):this.parentElement},e.prototype.setDefaultProps=function(){this.attributes={id:null,className:null,style:null},this.parentElement=document.body,this.element=null,this.parentSelector=null,this.tag="div",this.parent=null},e.prototype.innerRender=function(){this.render(),this.postRender()},e}(r),a=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.canDrag=!1,e}return a(e,t),e.prototype.initDragEvents=function(){var t=this;this.element&&(this.element.addEventListener("dragstart",function(e){t.onDragStart(e)}),this.element.addEventListener("dragend",function(e){t.onDragEnd(e)}))},e.prototype.onDragStart=function(t){this.setAsCurrent()},e.prototype.onDragEnd=function(t){this.clearCurrent()},e.prototype.setAsCurrent=function(){this.container.setCurrent(this)},e.prototype.clearCurrent=function(){this.container.current=null},e}(s),u=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),l=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return u(e,t),e.prototype.onSortSuccess=function(t){},e}(c),p=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),h=function(){return(h=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},f=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return p(e,t),e.prototype.onSortSuccess=function(t){var e=h({},t,{text:"text",name:"name",canDrag:this.canDrag});return this.events.onLineMove(e,this.element)},e.prototype.render=function(){var e=this;t.prototype.render.call(this),this.element.addEventListener("click",function(){e.events.onLineClick({text:"text",name:"name",canDrag:e.canDrag},e.element)},!1);var n="tree-line row";this.count%2==0?n+=" tree-line-even":n+=" tree-line-odd",this.setAttribute("className",n),this.parentElement&&(this.canDrag&&this.setAttribute("draggable",!0),this.text?this.element.innerHTML=this.text:this.createItems())},e.prototype.postRender=function(){this.initDragEvents()},e.prototype.createItems=function(){var t=this.structure.items;if(t){var e=this.getVisibleItemCount(t),n=!1;for(var r in t)if(this.data.item[r]){var o=t[r],i=this.getItemValue(r,o);if(!o.hidden){var s=this.createItem(i,e);if(!n){var a=10+20*this.level;s.style.paddingLeft=a+"px",n=!0}}}}},e.prototype.createItem=function(t,e){var n=Math.round(12/e),r="col-"+Math.max(1,n),i=o.createElement("div",t,{className:r});return this.addContent(i),i},e.prototype.getItemValue=function(t,e){var n=this.data.item[t];if(e.options&&n&&e.options[n]){var r=e.options[n].label;return r||null}return n||null},e.prototype.getVisibleItemCount=function(t){var e=0;for(var n in t){t[n].hidden||e++}return e},e.prototype.setDefaultProps=function(){t.prototype.setDefaultProps.call(this),this.level=0,this.data={item:null},this.structure={name:null,parent:null},this.color="dark",this.textColor="light",this.offset=0,this.tag="div",this.count=0,this.text=null,this.events={},this.events.onLineClick=function(t,e){},this.events.onLineMove=function(t,e){}},e}(l),d=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return d(e,t),e.prototype.addChild=function(t){var e=this.children.length;this.children.push({index:e,component:t}),t.parent=this},e.prototype.findChildByElement=function(t){for(var e=0,n=this.children;e<n.length;e++){var r=n[e];if(r.component.element===t)return r}return null},e.prototype.findChild=function(t){for(var e=0,n=this.children;e<n.length;e++){var r=n[e];if(r.component===t)return r}return null},e.prototype.moveChild=function(t,e){var n=this.children[t];this.children.splice(t,1),this.children.splice(e,0,n),this.resetIndexes()},e.prototype.resetIndexes=function(){for(var t=0,e=this.children.length;t<e;t++)this.children[t].index=t},e.prototype.setDefaultProps=function(){t.prototype.setDefaultProps.call(this),this.children=[]},e}(s),y=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return y(e,t),e.prototype.setCurrent=function(t){var e=this.findChild(t);e&&(this.current=e)},e.prototype.postRender=function(){this.initEvents()},e.prototype.initEvents=function(){var t=this;this.element&&(this.element.addEventListener("dragover",this.onDragOver),this.element.addEventListener("dragenter",this.onDragEnter),this.element.addEventListener("dragleave",this.onDragLeave),this.element.addEventListener("drop",function(e){return console.log(e),t.onDrop(e)}))},e.prototype.onDragOver=function(t){t.preventDefault()},e.prototype.onDragEnter=function(t){t.preventDefault()},e.prototype.onDragLeave=function(t){},e.prototype.onDrop=function(t){var e=t.target,n=this.current.component;this.element.insertBefore(n.element,e)},e.prototype.setDefaultProps=function(){t.prototype.setDefaultProps.call(this),this.current=null},e}(m),E=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return E(e,t),e.prototype.onDrop=function(t){var e=t.target,n=this.current.component.element;if(n!==e){var r=this.findChildByElement(e);if(r){var o=this.current.index,i=r.index;if(o>i)this.element.insertBefore(n,e);else{var s=e.nextElementSibling;s?this.element.insertBefore(n,s):this.element.appendChild(n)}if(this.moveChild(o,i),this.current.component instanceof l){var a=i-o;this.current.component.onSortSuccess({lastIndex:o,index:i,positionChange:a})}}}},e}(v),g=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),b=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return g(e,t),e.prototype.setContent=function(t){this.contentElement&&o.setContent(this.contentElement,t)},e.prototype.addContent=function(t){this.contentElement&&o.addContent(this.contentElement,t)},e.prototype.clearContent=function(){this.contentElement&&o.clearContent(this.contentElement)},e.prototype.render=function(){var e=this;t.prototype.render.call(this),this.element.className="modal-overlay";var n=o.createElement("div",null,{className:"modal-window-header"});this.contentElement=o.createElement("div",null,{className:"modal-window-body"});var r=o.createElement("div",null,{className:"modal-window-footer"}),i=o.createElement("div",new Array(n,this.contentElement,r),{className:"modal-window"});if(this.title){var s=o.createElement("h"+this.title.size,this.title.text);n.appendChild(s)}if(this.hasCloseButton){var a=o.createElement("span","&times;",{ariaHidden:"true"}),c=o.createElement("button",a,{className:"close",ariaLabel:"Close"});c.addEventListener("click",function(){e.close()}),n.appendChild(c)}this.content&&this.addContent(this.content);var u=null;this.dismissButton&&this.dismissButton.addEventListener("click",function(){e.onDismiss&&e.onDismiss(),e.close()}),this.confirmButton&&this.confirmButton.addEventListener("click",function(){e.onConfirm&&e.onConfirm()}),(this.dismissButton||this.confirmButton)&&(u=o.createElement("div",new Array(this.dismissButton,this.confirmButton),{className:"btn-group",role:"group"})),o.addContent(r,u),this.element.addEventListener("click",function(t){t.target===e.element&&e.close()}),o.addContent(this.element,i)},e.prototype.close=function(){this.hide(),this.onClose&&this.onClose()},e.prototype.setDefaultProps=function(){t.prototype.setDefaultProps.call(this),this.hasCloseButton=!0,this.confirmButton=null,this.dismissButton=null,this.onConfirm=null,this.onDismiss=null,this.onClose=null},e}(s),C=function(){var t=function(e,n){return(t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(e,n)};return function(e,n){function r(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),O=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return C(e,t),e.prototype.render=function(){var t=this;this.parentElement=this.getParentElement(),this.parentElement||(this.parentElement=document.body),this.element=o.createElement("div",null,{className:"tree-widget-list"});var e=o.createElement("div",this.element,{className:"tree-widget"});this.parentElement.appendChild(e),this.nodes.push({node:this,parent:null,children:[]});var n=this.nodes[this.nodes.length-1];this.createLines(this.data,n.children,n,0,{count:0},this.element);var r=o.createElement("button","Edit",{className:"btn"});document.body.appendChild(r),r.onclick=function(){t.modal.show()},this.modal=new b({parentElement:document.body,title:{size:3,text:"Header"},content:"Foo",dismissButton:o.createElement("button","Cancel",{className:"btn btn-default"}),confirmButton:o.createElement("button","Confirm",{className:"btn btn-primary"})})},e.prototype.setDefaultProps=function(){t.prototype.setDefaultProps.call(this),this.data=[],this.structure={},this.canEdit=!1,this.nodes=[],this.options={addLineText:null}},e.prototype.createLines=function(t,e,n,r,o,i,s){var a=t.length,c=0;for(var u in t){var l=t[u],p=Object.keys(this.structure)[r],h=this.structure[p],f=this.canEdit&&h.isSortable,d=this.createLine(r,o.count,f,i,l,h,{},s);if(this.canEdit&&s&&s.addChild(d),c++,this.canEdit&&a===c){o.count++;this.createAddLine(r,o.count,i,l,h)}o.count++;var y=this.element;if(l.children){var v=Object.keys(this.structure)[r+1],E=this.structure[v];if(this.canEdit&&E.isSortable)y=(s=new _({tag:"div"})).element,e.push({node:s,parent:n.node,children:[]});else{var g=new m({tag:"div",parentElement:i});y=g.element,e.push({node:g,parent:n.node,children:[]})}y.setAttribute("class",h.name),i.appendChild(y);var b=e[e.length-1];this.createLines(l.children,b.children,b,r+1,o,y,s)}}},e.prototype.addEditLine=function(t){var e=t.element,n=t.parentElement,r=this.createEditLine(t.level,t.structure.name,t.parentElement).element;r.focus(),r.addEventListener("focusout",function(){console.log("focusout")}),n.insertBefore(r,e)},e.prototype.createAddLine=function(t,e,n,r,o,i){var s=this,a=new f({parentElement:n,data:r,structure:o,level:t,count:e,text:this.options.addLineText?this.options.addLineText:"Add line +"});return a.element.addEventListener("click",function(){a.element.previousElementSibling;s.addEditLine(a)}),a},e.prototype.addLine=function(t,e){e.useFormEdit},e.prototype.createLine=function(t,e,n,r,o,i,s,a){var c={parentElement:r,data:o,structure:i,level:t,canDrag:n,events:this.events,container:a,count:e};return new f(c)},e.prototype.createEditLine=function(t,e,n){return this.createLine(t,0,!1,n,{item:null},{name:null,parent:null})},e}(s),w=function(){function t(){}return t.create=function(e){t.tree=new O(e)},t}();function L(t){return w.create(t)}n.d(e,"create",function(){return L})}]);